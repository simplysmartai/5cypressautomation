<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sales Order Automation - Simply Smart Automation</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="form-styles.css">
  <script src="dynamics.js" defer></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/remixicon@4.0.0/fonts/remixicon.css" rel="stylesheet">
</head>
<body>
  <!-- Decorative Background -->
  <div class="conic-mesh"></div>

  <!-- Navigation -->
  <nav class="navbar">
    <div class="container nav-container">
      <a href="/" class="logo">
        <div class="logo-icon logo-pulse">
          <img src="assets/brand/logo-leonardo.jpg" alt="5 Cypress Automation Logo">
        </div>
        <div class="logo-text-group">
          <span class="logo-title text-gradient-special">5 Cypress</span>
          <div class="logo-subtitle">
            <span>A</span><span>U</span><span>T</span><span>O</span><span>M</span><span>A</span><span>T</span><span>I</span><span>O</span><span>N</span>
          </div>
        </div>
      </a>
      
      <div class="nav-menu">
        <a href="/#services" class="nav-link">Pillars</a>
        <a href="/#approach" class="nav-link">Architecture</a>
        <a href="/dashboard" class="nav-link">Dashboard</a>
        <a href="/form" class="nav-link active">Sales Form</a>
      </div>

      <div class="nav-actions">
        <button onclick="window.location.href='/'" class="btn btn-primary">
          Home <i class="ri-home-line"></i>
        </button>
      </div>

      <button class="mobile-toggle" onclick="toggleMobileMenu()">
        <i class="ri-menu-line"></i>
      </button>
    </div>
  </nav>

  <!-- Mobile Menu -->
  <div class="mobile-menu" id="mobileMenu">
    <a href="/#services" class="mobile-link" onclick="closeMobileMenu()">Pillars</a>
    <a href="/#approach" class="mobile-link" onclick="closeMobileMenu()">Architecture</a>
    <a href="/dashboard" class="mobile-link" onclick="closeMobileMenu()">Dashboard</a>
    <a href="/form" class="mobile-link" onclick="closeMobileMenu()">Sales Form</a>
    <button onclick="window.location.href='/'; closeMobileMenu();" class="btn btn-primary btn-block">Home</button>
  </div>

  <div class="form-page-wrapper">
    <div class="form-hero">
      <div class="container">
        <div class="form-header">
          <h1 class="form-title">Sales Order Automation</h1>
          <p class="form-subtitle">Submit orders instantly. QuickBooks invoices, shipping orders, and customer notifications—all automated in seconds.</p>
        </div>
      </div>
    </div>

    <div class="container">
      <div class="form-content-wrapper">
        <form id="salesForm" class="modern-form">
        <form id="salesForm" class="modern-form">
          
          <!-- Customer Information Section -->
          <div class="form-section">
            <h3 class="section-title">Customer Information</h3>
            <div class="form-grid">
              <div class="form-field">
                <label for="customerName">Company Name <span class="required">*</span></label>
                <input type="text" id="customerName" name="customerName" required placeholder="Acme Corporation">
              </div>

              <div class="form-field">
                <label for="customerEmail">Email Address <span class="required">*</span></label>
                <input type="email" id="customerEmail" name="customerEmail" required placeholder="orders@company.com">
              </div>
            </div>
          </div>

          <!-- Order Details Section -->
          <div class="form-section">
            <h3 class="section-title">Order Details</h3>
            <div class="form-grid">
              <div class="form-field">
                <label for="date">Order Date <span class="required">*</span></label>
                <input type="date" id="date" name="date" required>
              </div>

              <div class="form-field">
                <label for="salesRep">Sales Representative <span class="required">*</span></label>
                <select id="salesRep" name="salesRep" required>
                  <option value="">Select sales rep...</option>
                  <option value="Doc">Doc</option>
                  <option value="Other guy">Other guy</option>
                </select>
              </div>

              <div class="form-field">
                <label for="orderType">Order Type <span class="required">*</span></label>
                <select id="orderType" name="orderType" required>
                  <option value="">Select order type...</option>
                  <option value="New">New Customer</option>
                  <option value="Renewal">Renewal</option>
                  <option value="Upsell">Upsell</option>
                </select>
              </div>

              <div class="form-field">
                <label for="productName">Product <span class="required">*</span></label>
                <select id="productName" name="productName" required>
                  <option value="">Select product...</option>
                  <option value="Laser 1">Laser 1</option>
                  <option value="Laser 2">Laser 2</option>
                  <option value="Mini Laser 1">Mini Laser 1</option>
                  <option value="Mini Laser 2">Mini Laser 2</option>
                </select>
              </div>

              <div class="form-field">
                <label for="quantity">Quantity <span class="required">*</span></label>
                <input type="number" id="quantity" name="quantity" required min="1" placeholder="1">
              </div>

              <div class="form-field">
                <label for="subProduct">Add Sub-Product?</label>
                <select id="subProduct" name="subProduct">
                  <option value="No">No</option>
                  <option value="Yes">Yes</option>
                </select>
              </div>
            </div>

            <div id="subProductSection" class="sub-product-section" style="display: none;">
              <div class="form-field">
                <label for="subProductName">Sub-Product Name</label>
                <select id="subProductName" name="subProductName">
                  <option value="">Select sub product...</option>
                  <option value="Laser 1">Laser 1</option>
                  <option value="Laser 2">Laser 2</option>
                  <option value="Mini Laser 1">Mini Laser 1</option>
                  <option value="Mini Laser 2">Mini Laser 2</option>
                </select>
              </div>
            </div>
          </div>

          <!-- Additional Information Section -->
          <div class="form-section">
            <h3 class="section-title">Additional Information</h3>
            <div class="form-field full-width">
              <label for="notes">Special Instructions</label>
              <textarea id="notes" name="notes" rows="4" placeholder="Any special delivery instructions, custom requirements, or notes for this order..."></textarea>
            </div>
          </div>

          <div class="form-actions">
            <button type="submit" class="btn-form-submit">
              <span>Submit Order</span>
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                <path d="M4 10H16M16 10L10 4M16 10L10 16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </button>
          </div>
        </form>

    <!-- Success Message -->
    <div id="successMessage" class="success-panel" style="display: none;">
      <div class="success-content">
        <div class="success-icon">
          <svg width="64" height="64" viewBox="0 0 64 64" fill="none">
            <circle cx="32" cy="32" r="30" stroke="currentColor" stroke-width="2"/>
            <path d="M20 32L28 40L44 24" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <h2 class="success-title">Order Submitted Successfully!</h2>
        <div id="successDetails" class="success-details"></div>
        
        <div class="automation-status">
          <h3>Automation Complete</h3>
          <ul class="status-list">
            <li class="status-item">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                <path d="M16.667 5L7.5 14.167L3.333 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <span>Invoice created in QuickBooks</span>
            </li>
            <li class="status-item">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                <path d="M16.667 5L7.5 14.167L3.333 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <span>Customer notification sent</span>
            </li>
            <li class="status-item">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                <path d="M16.667 5L7.5 14.167L3.333 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <span>Shipping order queued</span>
            </li>
          </ul>
        </div>

        <div class="success-actions">
          <a href="/form" class="btn-success-primary">Submit Another Order</a>
          <a href="/dashboard" class="btn-success-secondary">View Dashboard</a>
        </div>
      </div>
    </div>
      </div>
    </div>
  </div>

  <footer style="text-align: center; padding: 40px 0; background: var(--bg-surface); border-top: 1px solid var(--border-subtle);">
    <div class="container">
      <p style="margin: 0; color: var(--text-muted); font-size: 0.9rem;">&copy; 2026 5 Cypress Automation. Automated order processing powered by intelligent workflows.</p>
    </div>
  </footer>

  <script>
    // Mobile menu functions
    function toggleMobileMenu() {
      const menu = document.getElementById('mobileMenu');
      menu.classList.toggle('active');
    }

    function closeMobileMenu() {
      const menu = document.getElementById('mobileMenu');
      menu.classList.remove('active');
    }

    // Set today's date as default
    document.getElementById('date').valueAsDate = new Date();

    // Show/hide sub product section with animation
    document.getElementById('subProduct').addEventListener('change', (e) => {
      const section = document.getElementById('subProductSection');
      if (e.target.value === 'Yes') {
        section.style.display = 'block';
        setTimeout(() => section.style.opacity = '1', 10);
      } else {
        section.style.opacity = '0';
        setTimeout(() => section.style.display = 'none', 300);
      }
    });

    // Handle form submission
    document.getElementById('salesForm').addEventListener('submit', async (e) => {
      e.preventDefault();

      const submitBtn = e.target.querySelector('button[type="submit"]');
      const originalText = submitBtn.innerHTML;
      submitBtn.innerHTML = '<span>Processing...</span>';
      submitBtn.disabled = true;

      const formData = {
        customerName: document.getElementById('customerName').value,
        customerEmail: document.getElementById('customerEmail').value,
        date: document.getElementById('date').value,
        salesRep: document.getElementById('salesRep').value,
        orderType: document.getElementById('orderType').value,
        productName: document.getElementById('productName').value,
        quantity: document.getElementById('quantity').value,
        subProduct: document.getElementById('subProduct').value,
        notes: document.getElementById('notes').value
      };

      try {
        const response = await fetch('/api/orders', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(formData)
        });

        const result = await response.json();

        if (result.success) {
          // Hide form with animation
          const formWrapper = document.querySelector('.form-content-wrapper');
          formWrapper.style.opacity = '0';
          formWrapper.style.transform = 'translateY(-20px)';
          
          setTimeout(() => {
            formWrapper.style.display = 'none';
            
            // Show success message
            const successMsg = document.getElementById('successMessage');
            successMsg.style.display = 'flex';
            setTimeout(() => successMsg.style.opacity = '1', 10);
            
            const details = `
              <div class="order-summary">
                <div class="summary-row">
                  <span class="summary-label">Customer:</span>
                  <span class="summary-value">${formData.customerName}</span>
                </div>
                <div class="summary-row">
                  <span class="summary-label">Product:</span>
                  <span class="summary-value">${formData.productName} × ${formData.quantity}</span>
                </div>
                <div class="summary-row">
                  <span class="summary-label">Invoice ID:</span>
                  <span class="summary-value">${result.order.invoiceId}</span>
                </div>
                <div class="summary-row">
                  <span class="summary-label">Shipment ID:</span>
                  <span class="summary-value">${result.order.shipmentId}</span>
                </div>
              </div>
            `;
            document.getElementById('successDetails').innerHTML = details;
            
            // Scroll to top smoothly
            window.scrollTo({ top: 0, behavior: 'smooth' });
          }, 300);
        } else {
          alert('Error: ' + (result.error || 'Unknown error'));
          submitBtn.innerHTML = originalText;
          submitBtn.disabled = false;
        }
      } catch (error) {
        console.error('Error:', error);
        alert('Error submitting form. Please try again.');
        submitBtn.innerHTML = originalText;
        submitBtn.disabled = false;
      }
    });
  </script>
</body>
</html>
